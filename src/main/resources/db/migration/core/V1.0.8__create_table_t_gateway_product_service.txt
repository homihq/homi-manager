
CREATE TABLE t_gateway_product_service (
      id int NOT NULL,
      "name" varchar(100) NOT NULL,
      description varchar(250),
      slug varchar(50) ,
      active boolean default true,
      created_date timestamptz NOT NULL default now(),
      last_updated_date timestamptz NOT NULL default now(),
      cloud_provider_id int NOT NULL,
      CONSTRAINT pkt_cloud_service PRIMARY KEY (id)
);

ALTER TABLE t_gateway_product_service ADD CONSTRAINT fk_t_cloud_service FOREIGN KEY (cloud_provider_id) REFERENCES t_cloud_provider(id);


INSERT INTO t_gateway_product_service (id, "name", description, cloud_provider_id, slug)
    VALUES (1, 'Redis',  'Basic/ 1vCPU / 1 GB RAM / 10 GB SSD', 1, 'db-s-1vcpu-1gb');

INSERT INTO t_gateway_product_service (id, "name", description, cloud_provider_id, slug)
    VALUES (2, 'Redis',  'Basic/ 1vCPU / 2 GB RAM / 25 GB SSD', 1, 'db-s-1vcpu-2gb');

INSERT INTO t_gateway_product_service (id, "name", description, cloud_provider_id, slug)
    VALUES (3, 'Container',  'Pro/ 1vCPU / 1 GB RAM * 1', 1, 'professional-xxs');

INSERT INTO t_gateway_product_service (id, "name", description, cloud_provider_id, slug)
    VALUES (4, 'Container',  'Pro/ 1vCPU / 2 GB RAM * 2', 1, 'professional-xs');

INSERT INTO t_gateway_product_service (id, "name", description, cloud_provider_id, slug)
    VALUES (5, 'Container',  'Pro/ 2vCPU / 4 GB RAM * 3', 1, 'professional-s');

CREATE TABLE t_cloud_gateway_product_parts (
      plan_id int NOT NULL,
      service_id int NOT NULL,
      CONSTRAINT pk_t_cloud_gateway_product_parts PRIMARY KEY (plan_id, service_id)
);

ALTER TABLE t_cloud_gateway_plan_service ADD CONSTRAINT fk_t_cloud_gateway_plan_service_plan FOREIGN KEY (plan_id) REFERENCES t_cloud_gateway_plan(id);
ALTER TABLE t_cloud_gateway_plan_service ADD CONSTRAINT fk_t_cloud_gateway_plan_service_srvc FOREIGN KEY (service_id) REFERENCES t_cloud_service(id);

